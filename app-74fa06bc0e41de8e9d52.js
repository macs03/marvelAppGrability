webpackJsonp([1],[,function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=a(0),r=o(n);r["default"].module("app").run(["$templateCache",function(e){e.put("app/main.html",'<div class="main-container">\n  <header-app></header-app>\n  <main class="main">\n    <characters></characters>\n    <favorite></favorite>\n  </main>\n  <footer-app></footer-app>\n</div>'),e.put("app/characters/characters.html",'<section class="characters">\n  <div class="header-characters">\n    <div class="titles">\n      <figure>\n        <img src="marvelAppGrability/assets/icons/characters.png" alt="Characters">\n      </figure>\n      <span>Characters</span>\n    </div>\n    <div class="filters">\n      <select name="" id="">\n        <option value="1">All</option>\n        <option value="1">One</option>\n        <option value="1">Two</option>\n      </select>\n    </div>\n  </div>\n  <div class="body-characters row">\n    <div class="character col-md-5 col-sm-5 col-xs-5 col-lg-5" ng-repeat="character in $ctrl.characterData" ng-init="outerIndex = $index">\n      <div class="aux-box">\n        <div class="bx-1">\n          <figure>\n            <img ng-src="{{character.thumbnail.path}}.jpg" width="150" height="150" alt="{{character.name}}">\n          </figure>\n          <div class="info">\n            <h4>{{character.name}}</h4>\n            <p>{{character.description}}\n            </p>\n            <button ng-show="character.comics.items.length > 0" ng-click="$ctrl.showComics($index)" type="button" class="btn btn-default">View More</button>\n          </div>\n        </div>\n      </div>\n\n      <div class="related" ng-show="$ctrl.index == $index">\n        <div class="random-box">\n          <h4>Related comics</h4>\n          <i ng-click="$ctrl.randomComics(character.comics.items)" class="fa fa-random" aria-hidden="true"></i>\n        </div>\n        <div class="row">\n          <div class="comic-rel col-md-6 col-sm-6 col-xs-6 col-lg-6" ng-repeat="comic in character.comics.items">\n            <span ng-click="$ctrl.bringComic(comic.resourceURI,false)" class="comic-rel-name" data-toggle="modal" data-target="#myModal-{{character.id}}">{{comic.name}}</span>\n            <default-modal comic="$ctrl.comicDetail" index="character.id" flag="$ctrl.flag"></default-modal>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="footer-characters">\n    <ul class="pagination">\n      <li><a ng-click="$ctrl.changePage(0)" href="#">1</a></li>\n      <li><a ng-click="$ctrl.changePage(10)" href="#">2</a></li>\n      <li><a ng-click="$ctrl.changePage(20)" href="#">3</a></li>\n      <li><a ng-click="$ctrl.changePage(30)" href="#">4</a></li>\n      <li><a ng-click="$ctrl.changePage(40)" href="#">5</a></li>\n      <li><a ng-click="$ctrl.changePage(50)" href="#">6</a></li>\n      <li><a ng-click="$ctrl.changePage(60)" href="#">7</a></li>\n      <li><a ng-click="$ctrl.changePage(70)" href="#">8</a></li>\n      <li><a ng-click="$ctrl.changePage(80)" href="#">9</a></li>\n      <li><a ng-click="$ctrl.changePage(90)" href="#">10</a></li>\n    </ul>\n  </div>\n</section>'),e.put("app/commons/footer.html",'<footer>\n  <span>Grability 2017 - Todos los reservados</span>\n  <figure>\n    <img src="marvelAppGrability/assets/grability-logo.png" alt="Grability Logo">\n  </figure>\n</footer>'),e.put("app/commons/header.html",'<header class="header">\n  <figure ng-click="$ctrl.goHome()">\n    <img src="http://vignette3.wikia.nocookie.net/ironman/images/3/3e/Marvel_logo.png/revision/latest?cb=20130509080310&path-prefix=es" alt="Marvel Logo">\n  </figure>\n  <form ng-submit="$ctrl.sendQuery()">\n    <div class="general-search">\n      <input type="text" ng-model="$ctrl.query" placeholder="Search character">\n      <div class="search-box">\n        <input class="btn-sbm" type="submit">\n        <figure>\n          <img src="marvelAppGrability/assets/icons/search.png" alt="Search Glass">\n        </figure>\n      </div>\n    </div>\n  </form>\n</header>'),e.put("app/favorites/default.html",'<!-- Modal -->\n<div class="modal fade" id="myModal-{{$ctrl.index}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><img src="marvelAppGrability/assets/icons/btn-close.png" alt=""></button>\n      </div>\n      <div class="modal-body detail-modal">\n        <figure>\n          <img ng-src="{{$ctrl.comic.thumbnail.path}}.jpg" alt="{{$ctrl.comic.title}}" width="250" height="350">\n        </figure>\n        <div class="description">\n          <h3>{{$ctrl.comic.title}}</h3>\n          <p>\n            {{$ctrl.comic.description}}\n          </p>\n        </div>\n      </div>\n      <div class="modal-footer row">\n        <button ng-show="!$ctrl.flag" ng-click="$ctrl.addFav($ctrl.comic)" type="button" class="btn btn-default add-btn col-lg-6" data-dismiss="modal"><img src="marvelAppGrability/assets/icons/btn-favourites-default.png" alt="">ADD TO FAVOURITES</button>\n        <button ng-show="$ctrl.flag" type="button" class="btn btn-default added-btn col-lg-6" data-dismiss="modal"><img src="marvelAppGrability/assets/icons/btn-favourites-primary.png" alt="">ADDED TO FAVOURITES</button>\n        <button type="button" class="btn btn-primary buy-btn col-lg-6" data-dismiss="modal"><img src="marvelAppGrability/assets/icons/shopping-cart-primary.png" alt="">BUY FOR {{$ctrl.comic.prices[0].price | currency}}</button>\n      </div>\n    </div>\n  </div>\n</div>'),e.put("app/favorites/favorite.html",'<section class="favorites-box">\n  <div class="header-fav">\n    <figure>\n      <img src="marvelAppGrability/assets/icons/favourites.png" alt="Favourites">\n    </figure>\n    <span>My Favourites</span>\n  </div>\n  <div class="body-fav" ng-repeat="comic in $ctrl.favorites">\n    <div class="comic-box">\n      <figure>\n        <img ng-src="{{comic.thumbnail.path}}.jpg" alt="{{comic.title}}" width="150" height="250">\n      </figure>\n      <div class="description">\n        <p>\n          {{comic.description}}\n        </p>\n      </div>\n      <figure class="trash" ng-click="$ctrl.deleteFavorite($index)">\n        <img src="marvelAppGrability/assets/icons/btn-delete.png" alt="delete">\n      </figure>\n    </div>\n  </div>\n</section>'),e.put("app/modals/added.html","")}])},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=a(0),r=o(n);a(6),a(10),a(4),a(9);var i=a(17),c=a(14),s=a(20),l=a(12),u=o(l);a(7);var d=a(24),f=o(d),h=a(22),g=o(h),p=a(23),v=o(p),m=a(21);a(11),r["default"].module("app",[i.commonsModule,c.charactersModule,s.favoritesModule,"ui.router","toastr","angular-loading-bar"]).config(f["default"]).config(g["default"]).config(v["default"]).component("app",m.main).service("CharacterService",u["default"])},,,,,,,,,function(e,t){},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=function(){function e(t,o,n,r){a(this,e),this.$http=t,this.$q=o,this.$rootScope=r,this.$window=n;var i=window.navigator.language,c=i.split("-");this.navigatorLang=c[0]}return o(e,[{key:"getConfig",value:function(){var e=this,t=this.$q.defer();return this.$rootScope.config&&this.$rootScope.config.api_url&&t.resolve(this.$rootScope.config),this.$http.get("config.json").then(function(a){var o=a.data;e.$window.document.title=o.title,e.$rootScope.config=o,t.resolve(o)}),t.promise}},{key:"getCharacters",value:function(e){var t=this,a=this.$q.defer(),o=a.promise;return this.getConfig().then(function(o){t.$http({method:"GET",url:o.api_url+"characters?"+o.ts+"&"+o.user_key+"&"+o.hash_key+"&limit=10&offset="+e}).then(function(e){a.resolve(e)},function(e){a.reject(e)})}),o}},{key:"getCharactersByName",value:function(e,t){var a=this,o=this.$q.defer(),n=o.promise;return this.getConfig().then(function(n){a.$http({method:"GET",url:n.api_url+"characters?"+n.ts+"&"+n.user_key+"&"+n.hash_key+"&limit=10&offset="+e+"&nameStartsWith="+t}).then(function(e){o.resolve(e)},function(e){o.reject(e)})}),n}},{key:"getComic",value:function(e){var t=this,a=this.$q.defer(),o=a.promise;return this.getConfig().then(function(o){t.$http({method:"GET",url:e+"?"+o.ts+"&"+o.user_key+"&"+o.hash_key}).then(function(e){a.resolve(e)},function(e){a.reject(e)})}),o}}]),e}();n.$inject=["$http","$q","$window","$rootScope"],t["default"]=n},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.characters=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(0),c=o(i),s=function(){function e(t,a,o){function r(e,t){console.log(t),c.getCharactersByName(t)}function i(e,t){console.log(t),c.getCharacters()}n(this,e),this.CharacterService=t,this.$rootScope=o,this.getCharacters(),this.page=0,this.flag=!1;var c=this;a.$on("sendQuery",r),a.$on("goHome",i)}return r(e,[{key:"getCharacters",value:function(){var e=this;this.CharacterService.getCharacters(this.page).then(function(t){console.log(t.data.data.results),e.characterData=t.data.data.results})["catch"](function(e){console.log(e)})}},{key:"changePage",value:function(e){var t=this;console.log("cambiamos de pagina a "+e),this.CharacterService.getCharacters(e).then(function(e){console.log(e.data.data.results),t.characterData=e.data.data.results})["catch"](function(e){console.log(e)})}},{key:"getCharactersByName",value:function(e){var t=this;this.CharacterService.getCharactersByName(this.page,e).then(function(e){console.log(e.data.data.results),t.characterData=e.data.data.results})["catch"](function(e){console.log(e)})}},{key:"bringComic",value:function(e,t){var a=this;console.log("llamamos a "+e+" "+t);var o=JSON.parse(localStorage.getItem("favorites_marvel"));console.log(o),this.flag=!1,this.CharacterService.getComic(e).then(function(e){console.log(e.data.data.results[0]),a.comicDetail=e.data.data.results[0],c["default"].forEach(o,function(e){a.comicDetail.id===e.id&&(console.log("existe en favs"),a.flag=!0)}),t&&a.addFav(a.comicDetail)})["catch"](function(e){console.log(e)})}},{key:"showComics",value:function(e){console.log(e),this.index=e}},{key:"randomComics",value:function(e){console.log("add 3 comics to favorites random way"),console.log(e);for(var t=3,a=[];a.length<t;){for(var o=Math.ceil(Math.random()*e.length)-1,n=!1,r=0;r<a.length;r++)if(a[r]===o){n=!0;break}n||(a[a.length]=o)}for(var i=0;i<a.length;i++)console.log(e[a[i]]),this.bringComic(e[a[i]].resourceURI,!0)}},{key:"addFav",value:function(e){console.log("add to favorites"),console.log(e);var t=!1,a=JSON.parse(localStorage.getItem("favorites_marvel"));if(a)console.log("chequeamos si existe y guardamos"),c["default"].forEach(a,function(a){e.id===a.id&&(t=!0)}),t?console.info("Ya existe el comic en favoritos"):(console.log("guardamos"),a.push(e),console.log(a),localStorage.setItem("favorites_marvel",JSON.stringify(a)),this.$rootScope.$broadcast("refreshEvent",!0),this.toastr.success("Comic saved like Favorite"));else{console.log("se agrega de one");var o=[];o[0]=e,localStorage.setItem("favorites_marvel",JSON.stringify(o)),this.$rootScope.$broadcast("refreshEvent",!0),this.toastr.success("Comic saved like Favorite")}}}]),e}();s.$inject=["CharacterService","$scope","$rootScope"];t.characters={templateUrl:"app/characters/characters.html",controller:s}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.charactersModule=void 0;var n=a(0),r=o(n),i=a(13),c=t.charactersModule="characters";r["default"].module(c,[]).component("characters",i.characters)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.footerApp={templateUrl:"app/commons/footer.html"}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=function(){function e(t){a(this,e),this.$rootScope=t}return o(e,[{key:"sendQuery",value:function(){console.log(this.query),this.$rootScope.$broadcast("sendQuery",this.query)}},{key:"goHome",value:function(){this.$rootScope.$broadcast("goHome",!0),this.query=""}}]),e}();n.$inject=["$rootScope"];t.headerApp={controller:n,templateUrl:"app/commons/header.html"}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commonsModule=void 0;var n=a(0),r=o(n),i=a(15),c=a(16),s=t.commonsModule="commons";r["default"].module(s,[]).component("footerApp",i.footerApp).component("headerApp",c.headerApp)},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultModal=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(0),c=o(i),s=function(){function e(t,a){n(this,e),console.log("ready"),this.$rootScope=t,this.toastr=a}return r(e,[{key:"addFav",value:function(e){console.log("add to favorites"),console.log(e);var t=!1,a=JSON.parse(localStorage.getItem("favorites_marvel"));if(a)console.log("chequeamos si existe y guardamos"),c["default"].forEach(a,function(a){e.id===a.id&&(t=!0)}),t?console.info("Ya existe el comic en favoritos"):(console.log("guardamos"),a.push(e),console.log(a),localStorage.setItem("favorites_marvel",JSON.stringify(a)),this.$rootScope.$broadcast("refreshEvent",!0),this.toastr.success("Comic saved like Favorite"));else{console.log("se agrega de one");var o=[];o[0]=e,localStorage.setItem("favorites_marvel",JSON.stringify(o)),this.$rootScope.$broadcast("refreshEvent",!0),this.toastr.success("Comic saved like Favorite")}}}]),e}();s.$inject=["$rootScope","toastr"];t.defaultModal={bindings:{comic:"<",flag:"<",index:"<"},controller:s,templateUrl:"app/favorites/default.html"}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=function(){function e(t,o,n){function r(e,t){console.log(t),t&&i.getFavorites()}a(this,e),this.favorites=[],this.$rootScope=t,this.toastr=n,this.getFavorites();var i=this;o.$on("refreshEvent",r)}return o(e,[{key:"getFavorites",value:function(){this.favorites=JSON.parse(localStorage.getItem("favorites_marvel")),console.log(this.favorites)}},{key:"deleteFavorite",value:function(e){console.log(e),e>-1&&(this.favorites.splice(e,1),this.toastr.success("Comic Deleted")),localStorage.setItem("favorites_marvel",JSON.stringify(this.favorites)),this.getFavorites()}}]),e}();n.$inject=["$rootScope","$scope","toastr"];t.favorite={controller:n,templateUrl:"app/favorites/favorite.html"}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.favoritesModule=void 0;var n=a(0),r=o(n),i=a(19),c=a(18),s=t.favoritesModule="favorites";r["default"].module(s,[]).component("favorite",i.favorite).component("defaultModal",c.defaultModal)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.main={templateUrl:"app/main.html"}},function(e,t){"use strict";function a(e){e.includeSpinner=!1}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a,a.$inject=["cfpLoadingBarProvider"]},function(e,t){"use strict";function a(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!1,t.progressBar=!0}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a,a.$inject=["$logProvider","toastrConfig"]},function(e,t){"use strict";function a(e,t,a){a.html5Mode(!0).hashPrefix("!"),t.otherwise("/"),e.state("app",{url:"/",template:"<app></app>"})}a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},function(e,t,a){a(2),e.exports=a(1)}],[25]);